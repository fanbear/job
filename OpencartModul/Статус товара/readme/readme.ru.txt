========================================================================================================================
Статусы товара PRO, Стикеры, Автостатусы (Product Statuses PRO) v2.0
Автор sv2109 (sv2109@gmail.com)
========================================================================================================================
Больше 10 тысяч загрузок модулей от sv2109! 


Что делает этот модуль?

Модуль добавляет возможность добавить к каждому товару специальные статусы-картинки, которые могут отображаться в карточке товара, каталоге и на других страницах сайта и модулях. 

Зачем?

Красивый графический статус позволяет покупателю быстро найти нужный товар, обратить внимание на самые интересные его особенности. 
Это сделает ваш магазин более удобным для покупателей, что конечно же отразится на его конверсии и прибыли. 

Чем может быть статус?
Самые "вкусные" атрибуты и опции товара, которые отличают этот товар от остальных. Например это может быть известный брэнд (Intel, Apple), 4-х ядерный процессор для смартфона, большая диагональ для телевизора, компактный размер для стиральной машины, наличие разных цветов для платья итд. 
Статусы товара на складе: товар в наличии, товар заканчивается, товар скоро ожидается, товар доступен по предзаказу итд.
Особые характеристики товара, например низкая цена, бесплатная доставка, возможность покупки в кредит, акции, скидки  итд.
Все что угодно :)

Посмотрите, как эту возможность используют в других магазинах: 

наверное, самый большой магазин в Украине rozetka.ua - http://rozetka.com.ua/notebooks/c80004/filter/preset=workteaching/
магазин мебели - http://mebel-7ja.ua/catalog/divany

Возможности модуля:

Возможность назначать статусы для товаров
Мульти язычность, для разных языков могут быть назначены разные картинки и названия
Настройки размера картинок, возможность показывать оригинальные картинки, без уменьшения
Названия статуса может отображаться в виде подсказки, возле картинки ли не показываться
Отображение статусов рядом или с новой строки.
Название статуса может быть ссылкой на например страницу описания этого статуса (условие акции, страница производителя итд.)
Отдельные настройки для страницы товара и категории

Новое в версии 2.0:
- мультиатрибуты:
  - разные статусы могут ссылаться на 1 атрибут и все статусы будут отображаться (в версии 1 отображался только один статус в таком случае)
  - поддержка способа добавления значений атрибутов через запятую (используется некоторыми фильтрами), например: Атрибут1 -> "значение1,значение2,значение3"
- исправлен баг размер картинки для стикеров (стикеры отображались в блоке с размерами для статусов)
- исправлен баг z-index (теперь z-index: 1; для стикеров, стоял больше и иногда стикеры были выше других элементов сайта, например всплывающей корзины, галерей, меню итд.)
- добавлено кеширование (добавилась возможность кешировать результаты для увеличения скорости загрузки)
- копирование статусов при копировании товара (теперь работает, некоторым пользователям не хватало данной ф-ции)

Значительно расширились автоматические статусы, кроме стандартных атрибутов добавилось :

- производитель (можно назначать статусы для товаров конкретного производителя)
- категория (можно назначать статусы для товаров конкретной категории)
- цена От.. До.. (удобно например для бесплатной доставки для товаров дороже какой-то суммы)
- остаток на складе От.. До.. (удобно например для стикеров типа "Товар заканчивается", "Уточните наличие", "Предзаказ"
- новый товар (статус для новых товаров, какой товар считать новым настраивается в настройках)
- бестселлер (статус для товаров у которых больше всего продаж, к-во продаж настраивается в настройках)
- популярный товар (товары, которые больше всего просматривают, к-во просмотров настраивается в настройках)
- акция (статус для акционных товаров, стандартная акция opencart)
- акция модуля Акции Подарки (статус для товаров, в которых установлена акция из модуля "Акции, Подарки", 
в качестве картинки статуса есть возможность использовать картинку из акции модуля или фото подарка если если есть в акции есть подарок)

Новое в версии 1.1:
- добавлена возможность указывать отдельные размеры для стикеров
- исправлены ошибки

Новое в PRO версии:
- сортировка статусов в админке
- CSS настройки перенесены в файл
- автоматическое назначение статусов по атрибутам:
  - возможность назначать статус по значению атрибута
  - возможность 1 статус назначить для нескольких значений атрибута
  - возможнотсь статус назначить для всех значений 1 атрибута
  - умная сортировка - если есть статусы назначенные для товара и автоматические то все статусы сортируются согласно 2- сортировок
- режим стикеров - отображение статусов над картинкой товара:
  - 9 позиций для стикера - 4 угловых: лево-верх, лево-низ, право-верх, право-низ; 5 центральных: лево-центр, низ-центр, право-центр, лево-центр, центр
  - возможность показывать в стикерах автоматические статусы
  - защита от ошибки - есть случайно назначить 1 позицию 2 стикерам то покажется только один чтобы избежать наложения
- настройка видимости статусов, стикеров и автостатусов на странице товара и категории
 


Отличие стикеров в этом модуле от обычных стикеров, которые создают новую картинку товара с наложенными на нее стикерами:
- стикеры накладываются с помощью css, это значит что в отличие от стикеров в картинках, которые не могут выходить за пределы этой картинки, тем самым
накладываясь на товар, эти стикеры могут размещаться за пределами картинки, например над левым верхним углом, немного выходя за рамки картинки. 
- можно использовать ссылку в стикере, которая ведет на страницу с информацией об этом стикере, а также можно показать подсказку при наведении мышки.
- вместо обычных картинок можно загружать анимированый gif 

Модуль использует OCMOD, но возможна установка и без OCMOD

Совместимость: 

OpenCart 2.x

Демо:

Сайт: http://demo.sv2109.com/ocstore1551/index.php?route=product/category&path=25_28
Админка: http://demo.sv2109.com/ocstore1551/admin/index.php?route=module/product_status


Установка:

1. Переписать все файлы
2. Установить модуль
3. Установить файл install.ocmod.xml через админку opencart, меню "Установка расширений" ("Extension Installer"). После чего очистить кеш ocmod.
4. На странице настроек модуля изменить настройки, добавить свои статусы
5. На странице редактирования товара присвоить товару нужные статусы
6. Для отображения статусов в карточке товара:
- открыть файл /catalog/view/theme/навание_темы/template/product/product.tpl
- в нужном месте, например после "<h1><?php echo $heading_title; ?></h1>", добавить:

<div class="statuses"><?php echo $statuses; ?></div>

- для отображения стикеров после 
  "<ul class="thumbnails">
    <?php if ($thumb) { ?>
      <li>" добавить: 

<?php echo $stickers; ?>

6. Для отображения статусов на странице категории:
- открыть файл /catalog/view/theme/навание_темы/template/product/category.tpl
- после "<p><?php echo $product['description']; ?></p>" добавить:

<div class="statuses"><?php echo $product['statuses']; ?></div>

- для отображения стикеров после "<div class="image">" добавить: 

<?php echo $product['stickers']; ?>

Примеры уже измененных файлов шаблона для стандартной темы смотрите в папке templates


Переход с версии 1.х на 2.0:

1. Выполнить SQL запрос:

ALTER TABLE `oc_status` 
  ADD `manufacturer_id` INT(11) NOT NULL, 
  ADD `category_id` INT(11) NOT NULL,
  ADD `price_from` DECIMAL(15,4) NOT NULL,
  ADD `price_to` DECIMAL(15,4) NOT NULL,
  ADD `stock_from` INT(4) NOT NULL,
  ADD `stock_to` INT(4) NOT NULL,
  ADD `new` INT(1) NOT NULL,
  ADD `bestseller` INT(1) NOT NULL,
  ADD `popular` INT(1) NOT NULL,
  ADD `special` INT(1) NOT NULL,
  ADD `promotion` INT(1) NOT NULL,
  ADD `promotion_image` INT(1) NOT NULL;


Переход из обычной версии на PRO:

1. Выполнить 2 SQL запроса:

ALTER TABLE `oc_status` 
  ADD `sort_order` INT(3) NOT NULL DEFAULT '0', 
  ADD `attribute_id` INT(3) NOT NULL, 
  ADD `sticker` VARCHAR(255) NOT NULL;

CREATE TABLE IF NOT EXISTS `oc_status_attribute` (
  `status_id` int(11) NOT NULL,
  `attribute_id` int(11) NOT NULL,
  `language_id` int(11) NOT NULL,
  `text` text NOT NULL,
  KEY (`status_id`, `attribute_id`, `language_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8  COLLATE=utf8_general_ci;

2. Переписать все файлы, заменив старые. 

