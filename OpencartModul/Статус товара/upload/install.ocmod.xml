<modification>  <code>Product statuses</code>  <name>Product statuses</name>  <version>2.0</version>  <author>sv2109</author>  <link>http://sv2109.com</link>    <file path="system/library/customer.php">    <operation>      <search><![CDATA[public function getId() {      ]]></search>      <add position="before"><![CDATA[public function getCustomerGroupId() {  return $this->getId();}      ]]></add>    </operation>		  </file>      <file path="catalog/controller/common/header.php">    <operation>      <search><![CDATA[$data['styles'] = $this->document->getStyles();      ]]></search>      <add position="before"><![CDATA[$this->document->addStyle('catalog/view/theme/default/stylesheet/product_statuses.css');      ]]></add>    </operation>		  </file>  <file path="catalog/controller/product/product.php">    <operation>      <search><![CDATA[if ($product_info) {              ]]></search>      <add position="after"><![CDATA[$data['statuses'] =  $product_info['statuses']['product'];$data['stickers'] =  $product_info['statuses']['product_stickers'];              ]]></add>    </operation>		  </file>  <file path="catalog/controller/product/category.php">    <operation>      <search><![CDATA[$data['products'][] = array(      ]]></search>      <add position="after"><![CDATA['statuses'    => $result['statuses']['category'],'stickers'    => $result['statuses']['category_stickers'],              ]]></add>    </operation>		  </file>  <file path="catalog/model/catalog/product.php">    <operation>      <search><![CDATA[public function getProduct($product_id) {              ]]></search>      <add position="after"><![CDATA[$this->load->model('catalog/product_status');      ]]></add>    </operation>    <operation>      <search><![CDATA[return array(              ]]></search>      <add position="after"><![CDATA['statuses' => $this->model_catalog_product_status->getHTMLProductStatuses($query->row),      ]]></add>    </operation>    		  </file>  <file path="admin/controller/catalog/product.php">    <operation>      <search><![CDATA[$this->response->setOutput($this->load->view('catalog/product_form.tpl', $data));      ]]></search>      <add position="before"><![CDATA[				$this->load->language('module/product_status');		$data['status_show_in_category'] = $this->language->get('status_show_in_category');		$data['status_show_in_product'] = $this->language->get('status_show_in_product');		$data['tab_statuses'] = $this->language->get('tab_statuses');		$data['status_image'] = $this->language->get('status_image');		$data['status_name'] = $this->language->get('status_name');		$data['button_add_status'] = $this->language->get('button_add_status');			$this->load->model('catalog/product_status');		if (isset($this->request->get['product_id'])) {			$data['product_statuses'] = $this->model_catalog_product_status->getProductStatuses($this->request->get['product_id']);		} else {			$data['product_statuses'] = array();		}      ]]></add>    </operation>		  </file>  <file path="admin/model/catalog/product.php">    <operation>      <search><![CDATA[public function editProduct($product_id, $data) {             ]]></search>      <add position="after"><![CDATA[				$this->load->model('catalog/product_status');		$this->model_catalog_product_status->addProductStatuses($product_id, $data);		      ]]></add>    </operation>		    <operation>      <search><![CDATA[public function deleteProduct($product_id) {              ]]></search>      <add position="after"><![CDATA[				$this->load->model('catalog/product_status');		$this->model_catalog_product_status->deleteProductStatuses($product_id);		      ]]></add>    </operation>		    <operation>      <search><![CDATA[$product_id = $this->db->getLastId();      ]]></search>      <add position="after"><![CDATA[				$this->load->model('catalog/product_status');		$this->model_catalog_product_status->addProductStatuses($product_id, $data);		      ]]></add>    </operation>		    <operation>      <search><![CDATA[$data['product_recurrings'] = $this->getRecurrings($product_id);      ]]></search>      <add position="after"><![CDATA[				$this->load->model('catalog/product_status');    $data['product_status'] = $this->model_catalog_product_status->getProductStatuses($product_id);      ]]></add>    </operation>		  </file>  <file path="admin/view/template/catalog/product_form.tpl">    <operation>      <search><![CDATA[<div class="tab-pane" id="tab-discount">              ]]></search>      <add position="before"><![CDATA[        <div class="tab-pane" id="tab-statuses">          <table id="status" class="table table-striped table-bordered table-hover">            <thead>              <tr>                <td></td>                <td class="left"><?php echo $status_image; ?></td>                <td class="left"><?php echo $status_show_in_category; ?></td>                <td class="left"><?php echo $status_show_in_product; ?></td>                <td class="left"><?php echo $entry_sort_order; ?></td>                <td></td>              </tr>            </thead>            <?php $status_row = 0; ?>            <?php foreach ($product_statuses as $product_status) { ?>            <tbody id="status-row<?php echo $status_row; ?>">              <tr>                <td class="left">                  <input type="text" name="product_status[<?php echo $status_row; ?>][name]" value="<?php echo $product_status['name']; ?>" class="form-control"/>                  <input type="hidden" name="product_status[<?php echo $status_row; ?>][status_id]" value="<?php echo $product_status['status_id']; ?>" />                   <input type="hidden" name="product_status[<?php echo $status_row; ?>][thumb]" value="<?php echo $product_status['thumb']; ?>" />                </td>                <td class="left status-image">                  <img src='<?php echo $product_status['thumb']; ?>' ?>                </td>                <td class="left status-category">                  <input type="checkbox" name="product_status[<?php echo $status_row; ?>][category_show]" value="1" <?php echo isset($product_status['category_show']) && $product_status['category_show'] ? "checked='checked'" : ''; ?> class="form-control" />                </td>                <td class="left status-product">                  <input type="checkbox" name="product_status[<?php echo $status_row; ?>][product_show]" value="1" <?php echo isset($product_status['product_show']) && $product_status['product_show'] ? "checked='checked'" : ''; ?> class="form-control" />                </td>                <td class="left sort-order">                  <input type="text" name="product_status[<?php echo $status_row; ?>][sort_order]" value="<?php echo isset($product_status['sort_order']) ? $product_status['sort_order'] : ''; ?>" class="form-control" />                </td>                <td class="left"><a onclick="$('#status-row<?php echo $status_row; ?>').remove();" data-toggle="tooltip" title="<?php echo $button_remove; ?>" class="btn btn-danger"><i class="fa fa-minus-circle"></i></a>                </td>              </tr>            </tbody>            <?php $status_row++; ?>            <?php } ?>            <tfoot>              <tr>                <td colspan="5"></td>                <td class="text-left">                  <!--<a onclick="addStatus();" class="button">                    <?php echo $button_add_status; ?></a>-->                  <button type="button" onclick="addStatus()" data-toggle="tooltip" title="" class="btn btn-primary" data-original-title="<?php echo $button_add_status; ?>"><i class="fa fa-plus-circle"></i></button>                </td>              </tr>            </tfoot>          </table><script type="text/javascript"><!--$(document).ready(function() {  $('ul.nav-tabs li a[href="#tab-discount"]').parent().before('<li><a href="#tab-statuses" data-toggle="tab"><?php echo $tab_statuses; ?></a></li>'); });  var status_row = <?php echo $status_row; ?>;function addStatus() {	html  = '<tbody id="status-row' + status_row + '">';    html += '  <tr>';	  html += '    <td class="left"><input type="text" name="product_status[' + status_row + '][name]" value="" class="form-control" /><input type="hidden" name="product_status[' + status_row + '][status_id]" value="" /><input type="hidden" name="product_status[' + status_row + '][thumb]" value="" /></td>';    html += '    <td class="left status-image"></td>';    html += '    <td class="left status-category"><input type="checkbox" name="product_status[' + status_row + '][category_show]" value="1" checked="checked" class="form-control" /></td>';    html += '    <td class="left status-product"><input type="checkbox" name="product_status[' + status_row + '][product_show]" value="1" checked="checked" class="form-control" /></td>';    html += '    <td class="left sort-order"><input type="text" name="product_status[' + status_row + '][sort_order]" value="" class="form-control" /></td>';		html += '    <td class="left"><a onclick="$(\'#status-row' + status_row + '\').remove();" data-toggle="tooltip" title="<?php echo $button_remove; ?>" class="btn btn-danger"><i class="fa fa-minus-circle"></i></a></td>';    html += '  </tr>';	    html += '</tbody>';		$('#status tfoot').before(html);		statusautocomplete(status_row);		status_row++;}function statusautocomplete(status_row) {	$('input[name=\'product_status[' + status_row + '][name]\']').autocomplete({		delay: 500,		source: function(request, response) {			$.ajax({				url: 'index.php?route=module/product_status/autocomplete&token=<?php echo $token; ?>&filter_name=' +  encodeURIComponent(request),				dataType: 'json',				success: function(json) {						response($.map(json, function(item) {						return {							url: item['url'],              thumb: item['thumb'],							label: item['name'],							value: item['status_id']						}					}));				}			});		}, 		select: function(item) {			$('input[name=\'product_status[' + status_row + '][name]\']').attr('value', item['label']);			$('input[name=\'product_status[' + status_row + '][status_id]\']').attr('value', item['value']);      $('input[name=\'product_status[' + status_row + '][thumb]\']').attr('value', item['thumb']);      $('#status-row' + status_row + ' td.status-image').html('<img src="' + item['thumb'] + '"/>');			return false;		},		focus: function(event, ui) {      		return false;   		}	});  }$('#status tbody').each(function(index, element) {	statusautocomplete(index);});  //--></script>                   </div>      ]]></add>    </operation>		  </file></modification>